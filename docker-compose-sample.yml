version: '2.1'

services:
  db:
    image: mysql
    command: --default-authentication-plugin=mysql_native_password
    restart: always
    volumes:
      - ./db:/docker-entrypoint-initdb.d # configure schema
    environment:
      MYSQL_ROOT_PASSWORD: YOUR_DB_PASSWORD # REPLACE
      MYSQL_DATABASE: YOUR_DB_USERNAME # REPLACE
    ports:
      - 3306:3306
    healthcheck:
      test: ["CMD", "mysqladmin" ,"ping", "-h", "localhost"]
      timeout: 20s
      retries: 10

  Sealy:
    image: sealybot
    depends_on:
      db:
        condition: service_healthy
    environment:
      DISCORD_TOKEN: YOUR_DISCORD_TOKEN # REPLACE
      TENOR_KEY: YOUR_TENOR_KEY # REPLACE
      DB_HOST: YOUR_DB_HOST # REPLACE
      DB_PORT: YOUR_DB_PORT # REPLACE
      DB_NAME: YOUR_DB_NAME # REPLACE
      DB_USER: YOUR_DB_USER # REPLACE
      DB_PASS: YOUR_DB_PASS # REPLACE
      DOCKER_CONTAINER: YOUR_DOCKER_CONTAINER # REPLACE
      MYSQL_HOST: YOUR_MYSQL_HOST # REPLACE
      MYSQL_PORT: YOUR_MYSQL_PORT # REPLACE
      MYSQL_USER: YOUR_MYSQL_USER # REPLACE
      MYSQL_PASS: YOUR_MYSQL_PASS # REPLACE